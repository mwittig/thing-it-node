<script>
    window.onmessage = function (event) {
        console.log("================> ");
        console.log(event);
        event = JSON.parse(event.data);
        console.log(event);

        if (event.type == "left") {
            jQuery("#" + event.device + " #left").addClass("click");

            window.setTimeout(function () {
                jQuery("#" + event.device + " #left").removeClass("click");
            }, 1000);
        }
        else if (event.type == "right") {
            jQuery("#" + event.device + " #right").addClass("click");

            window.setTimeout(function () {
                jQuery("#" + event.device + " #right").removeClass("click");
            }, 1000);
        }
    };
</script>
<style>
    .circleButton {
        border-radius: 50%;
        width: 30px;
        height: 30px;
        padding: 12px;
        background-color: #5E829A;
        border: none;
        color: #FFFFFF;
        text-align: center;
        vertical-align: middle;
        font-size: 24px;
    }

    .click {
        background-color: #BFAE99;
    }
</style>
<table id="{{device.id}}" style="display: inline-block;">
    <thead>
    <tr>
        <th></th>
        <th></th>
        <th style="width: 80px;"></th>
        <th></th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td colspan="4" style="text-align: center !important;">
            <table>
                <tr>
                    <td>
                        <div id="left" class="circleButton">L</div>
                    </td>
                    <td>
                        <div id="right" class="circleButton" style="margin-left: 10px;">R</div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr ng-show="device.configuration.ambientTemperatureEnabled">
        <td><label>Ambient Temperature</label></td>
        <td></td>
        <td style="text-align: right;">{{formatDecimal(device._state.ambientTemperature)}}</td>
        <td><label>&#8451;</label></td>
    </tr>
    <tr ng-show="device.configuration.irTemperatureEnabled">
        <td><label>IR Temperature</label></td>
        <td></td>
        <td style="text-align: right;">{{formatDecimal(device._state.ambientTemperature)}}</td>
        <td><label>&#8451;</label></td>
    </tr>
    <tr ng-show="device.configuration.accelerometerEnabled">
        <td rowspan="3"><label>Acceleration</label></td>
        <td><label>X</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.acceleration.x)}}</td>
        <td><label>G</label></td>
    </tr>
    <tr ng-show="device.configuration.accelerometerEnabled" style="vertical-align: center !important;">
        <td><label>Y</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.acceleration.y)}}</td>
        <td><label>G</label></td>
    </tr>
    <tr ng-show="device.configuration.accelerometerEnabled" style="vertical-align: center !important;">
        <td><label>Z</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.acceleration.z)}}</td>
        <td><label>G</label></td>
    </tr>
    <tr ng-show="device.configuration.magnetometerEnabled">
        <td rowspan="3"><label>Magnetic Field Strength</label></td>
        <td><label>X</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.magneticFieldStrength.x)}}</td>
        <td><label>&mu;T</label></td>
    </tr>
    <tr ng-show="device.configuration.magnetometerEnabled">
        <td><label>Y</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.magneticFieldStrength.y)}}</td>
        <td><label>&mu;T</label></td>
    </tr>
    <tr ng-show="device.configuration.magnetometerEnabled">
        <td><label>Z</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.magneticFieldStrength.z)}}</td>
        <td><label>&mu;T</label></td>
    </tr>
    <tr ng-show="device.configuration.humidityEnabled">
        <td><label>Humidity</label></td>
        <td></td>
        <td style="text-align: right;">{{formatDecimal(device._state.humidity)}}</td>
        <td><label>%rH</label></td>
    </tr>
    <tr ng-show="device.configuration.barometricPressureEnabled">
        <td><label>Barometric Pressure</label></td>
        <td></td>
        <td style="text-align: right;">{{formatDecimal(device._state.barometricPressure)}}</td>
        <td><label>mbar</label></td>
    </tr>
    <tr ng-show="device.configuration.gyroscopeEnabled">
        <td rowspan="3"><label>Gyroscopic Propulsion</label></td>
        <td><label>X</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.gyroscopicPropulsion.x)}}</td>
        <td><label>&deg;/s</label></td>
    </tr>
    <tr ng-show="device.configuration.gyroscopeEnabled">
        <td><label>Y</label></td>
        <td style="text-align: right;">{{formatDecimal(device._state.gyroscopicPropulsion.y)}}</td>
        <td><label>&deg;/s</label></td>
    </tr>
    <tr ng-show="device.configuration.gyroscopeEnabled">
        <td><label>Z</label></td>
        <td style="text-align: right;">{{device._state.gyroscopicPropulsion.z}}</td>
        <td><label>&deg;/s</label></td>
    </tr>
    </tbody>
</table>
